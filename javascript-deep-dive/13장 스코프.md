# 13장 스코프

1. 스코프란 **식별자가 유효한 범위**이다.

<br />

2. 모든 식별자(변수 이름, 함수 이름, 클래스 이름 등)는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정되는데 이것을 스코프라고 한다.

<br />

3. "코드가 어디서 실행되며 주변에 어떤 코드가 있는지"를 **렉시컬 환경(lexical environment)**라고 한다.

<br />

4. 변수를 생성할 때 스코프가 다르고, 변수 이름이 똑같은 변수를 생성하면 이름만 동일하지 별개의 변수다.
    - 만약 스코프가 없다면 전체 프로젝트에서 특정 변수 명을 하나만 사용할 수 있기에 매우 불편해질 것이다.

<br />

5. 전역은 코드의 가장 바깥 영역을 의미하고, 전역은 **전역 스코프(global scope)**를 만든다. 지역에 변수를 선언하면 전역 스코프를 갖는 **전역 변수(global variable)**가 되며 **어디서든지 참조**할 수 있다.

<br />

6. 지역은 함수 몸체 내부를 말하고, 지역은 **지역 스코프(local scope)**를 만든다. 지역에 변수를 선언하면 지역 스코프를 갖는 **지역 변수(local variable)**가 된다. 지역 변수는 **자신의 지역 스코프와 하위 지역 스코프에서 유효**하다.

<br />

7. 전역 변수와 지역 변수의 식별자가 동일할 때 지역 스코프에서 변수를 호출하면 지역 변수를 불러온다.

```jsx
var a = "global a"

function outer () {
	var b = "outer b"
	
	console.log(a) // global a
	console.log(b) // outer b

	function inner () {
		var a = "local a"
		
		console.log(a) // local a
	}	
}

console.log(a) // global a
```

<br />

8. 스코프가 계층적으로 연결되어 있는 것을 **스코프 체인(scope chain)**이라고 한다.
    - 변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 **변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 검색**한다.
    - 위 과정에서 절대 하위 스코프로 내려가면서 식별자를 검색하는 일은 없다.
    - 상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조할 수 있지만, 하위 스코프에서 유효한 변수는 상위 스코프에서 참조할 수 없다.

<br />

9. 지역은 함수 몸체 내부를 말하고 **코드 블록이 아닌 함수에 의해서 생성된 지역 스코프를 의미**한다.

<br />

10. 함수를 **어디서 호출**했는지에 따라 함수의 상위 스코프를 결정하는 것을 **동적 스코프(dynamic scope)**라고 하고, 함수를 **어디서 정의**했는지에 따라 함수의 상의 스코프를 결정하는 것을 **렉시컬 스코프(lexical scope)**라고 한다.
    - 자바스크립트는 렉시컬 스코프를 따른다.
    - 함수의 상위 스코프는 언제나 자신이 정의된 스코프다.

<br />

# 🤔 문제

```jsx
console.log(x); // (1)
console.log(y); // (2)

var x = 10;

function a () {
  y = 20;
  console.log(x + y);
}

a(); // (3)
```

1. (1)의 실행 결과로 알맞은 것은?
    
    1) `10`
    
    2) `undefined`
    
    3) `ReferenceError: x is not defined`
    
    4) `TypeError: Cannot read property`
    
- 답
    
    2) undefined
    
<br />

2. ②의 실행 결과로 알맞은 것은?
    
    1) `20`
    
    2) `undefined`
    
    3) `ReferenceError: y is not defined`
    
    4) `TypeError: Cannot read property`
    
- 답
    
    3) `ReferenceError: y is not defined`
    
    - y는 변수 선언없이 전역 객체의 프로퍼티로 추가되었을 뿐이다. 따라서 y는 변수가 아니고 호이스팅이 발생하지 않는다.

<br />

3. ③의 실행 결과로 알맞은 것은?
    
    1) `30`
    
    2) `undefined`
    
    3) `NaN`
    
    4) `ReferenceError: y is not defined`
    
    5) `TypeError: Cannot read property`
    
- 답
    
    1) 30
    
    - 변수 y의 선언을 찾을 수 없으므로 참조 에러가 발생해야 하지만 자바스크립트 엔진은 `y = 20`을 `window.y = 20`으로 해석하여 프로퍼티를 동적 생성하는데 이를 **암묵적 전역(implicit global)**이라 한다.
        
        결국 y는 전역 객체의 프로퍼티가 되어 마치 전역 변수처럼 동작한다.
        

<br />

4. 자바스크립트 함수의 상위 스코프는 언제나 자신이 정의된 스코프를 의미한다.
    
    (⭕) or (❌)
    
- 답
    
    ⭕
    
    - 함수의 상위스코프의 결정은 함수를 어디서 정의했는지에 따르기 때문에 함수 정의가 실행될 때 정적으로 결정된다.