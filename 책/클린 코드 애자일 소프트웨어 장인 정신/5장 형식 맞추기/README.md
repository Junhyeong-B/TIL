# 5장 형식 맞추기

# 1. 형식을 맞추는 목적

코드 형식을 맞추는 것은 중요하다. 최근 구현된 기능이 미래에 변경되어 아예 제거될 수도 있지만, 업데이트되면서 코드가 변경되더라도 코딩 스타일과 규율은 사라지지 않는다.

코딩 스타일의 일관성이 유지된다면 읽는 사람으로 하여금 신뢰도를 높여주고, 코드를 빠르게 이해할 수 있도록 돕는다. 일관된 코딩 스타일로 인해 읽어 내려가면서 다음 코드를 어느정도 예측할 수 있기 때문이다.

<br />

# 2. 형식을 맞추는 방법

## 2-1) 적절한 행 길이

적절하다는 것은 상대적인 개념으로 개발자마다 다르게 생각할 수 있지만, 책에서는 200줄 미만으로 작성하는 것을 바람직한 규칙으로 삼길 바라고 있다.

개인적으로 코드를 작성하다보면 짧은 코드일수록 이해가 빠르고, 길어질수록 이해가 배로 느려지는 듯한 느낌을 받는다. 그리고 책에서처럼 200줄보다 더 큰 코드를 작성하다보면 분명 더 작은 단위로 쪼갤 수 있는 함수나 컴포넌트가 존재한다.

물론 컴포넌트를 더 작게 쪼갰을 때 가능하다고 해서 무조건 쪼개는 것이 아니라 쪼갬으로써 발생할 수 있는 Prop Drilling을 인지한 상태로 적절히 대처할 수 있어야 한다고 생각한다.

<br />

## 2-2) 개념은 빈 행으로

빈 행으로 개념을 분리할 수 있다. 패키지 선언부, import 문, 함수 등을 빈 행으로 띄워놓는다면 시각적으로 서로 다른 개념이라는 것을 알려줄 수 있다.

<br />

**개념을 분리하지 않은 코드** ⇒ 가독성이 떨어진다.

```jsx
import React from 'react'
const Component = () => {}
export default Component;
```

<br />

**개념을 분리한 코드**

```jsx
import React from 'react'

const Component = () => {}

export default Component;
```

<br />

## 2-3) 세로 밀집도

세로 밀집도는 연관성을 의미하는데, 서로 밀접한 코드 행은 세로로 가까이 놓으면 좋다. 주석이나 불필요한 빈 행으로 연관된 코드들을 떨어뜨려 놓는다면 오히려 가독성이 떨어진다. 아래 코드는 변수 2개, 함수 1개를 나타내고 있는데, 변수 2개는 연관성이 있으므로 붙여 놓는 것이 코드가 더 한눈에 들어온다.

<br />

**세로 밀집도를 지키지 않았을 때**

```jsx
const className = "className";

const properties = ["properties"];

const addProperty = (property) => {
	properties.push(property);
}
```

<br />

**세로 밀집도를 지켰을 때**

```jsx
const className = "className";
const properties = ["properties"];

const addProperty = (property) => {
	properties.push(property);
}
```

<br />

## 2-4) 수직 형식 맞추기

### 2-4-1) 변수 선언

변수는 사용하는 위치에 최대한 가까이 선언한다. 함수 내부에 지역변수를 선언할 때는 각 함수 맨 처음에 선언한다. 루프를 제어하는 변수는 루프 문 내부에 선언한다.

매우 긴 함수에서 블록 상단이나 루프 직전에 변수를 선언할 수도 있다.

<br />

### 2-4-2) 종속 함수 선언

한 함수가 다른 함수를 호출한다면 두 함수를 세로로 가까이 배치한다. 그리고 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치한다. 이렇게하면 코드를 읽는 사람이 호출한 함수가 다음에 정의되어 있을 것이라고 예측할 수 있다.

자바스크립트에서 코드의 실행 순서는 중요한데, 만약 호출하는 함수가 호출되는 함수보다 먼저 호출하게 되면 `Cannot access function before initialization` 에러가 발생한다. 따라서 호출 순서를 적절히 고려하여 작성해야 될 것이다.
또한, 종속 함수들을 세로로 배열하는 것도 좋지만 여러곳에서 재사용이 많이 되는 함수라면 모듈로따로 분리해 사용해도 될 것 같다.

<br />

## 2-5) 가로 형식 맞추기

### 2-5-1) 가로 공백과 밀집도

연산자는 공백을 넣어 왼쪽 요소와 오른쪽 요소를 분명하게 나누고, 함수 호출 등의 괄호는 공백을 빼 밀접함을 나타낼 수 있다.

<br />

**가로 공백을 넣지 않았을 때**

```jsx
let count=0;
const array=[...];
const size=array.length;
count+=size;
```

<br />

**가로 공백을 넣었을 때**

```jsx
let count = 0;
const array = [...];
const size = array.length;
count += size;
```

<br />

### 2-5-2) 들여쓰기

코드 내 블록문이나 각 메서드들을 해석하는 범위를 나타낸다. 들여쓰기를 하지 않아도 코드가 작동은 하지만 코드를 읽는 것이 매우 어려워진다. 이 부분은 IDE에서 tab 설정을 켜놓고 사용한다면 쉽게 지킬 수 있는 부분이라고 생각한다.

자바스크립트에서 if문, 반복문 등을 짧게 작성하여 아래와 같이 한줄로 작성할 수도 있다.

```jsx
let initialize = false;

if (isFlagged) initialize = true;
```

<br />

물론 코드는 정상적으로 동작하고, 팀의 컨벤션에 따라 다를 수 있지만 들여쓰기를 넣어 범위를 명확히 표시해주는 것이 가독성이 더 좋다.

```jsx
let initialize = false;

if (isFlagged) {
	initialize = true
}
```

<br />

# 3. 정리

형식을 맞추는 것에 정답은 없다고 생각한다. 다만, 가독성을 높여주거나 읽는 사람이 다음 동작을 더 쉽게 예측할 수 있도록 만드는 규칙은 있다고 생각한다. 책에서 제시하고 있는 모든 규칙은 정답이 아닐 것이고, 팀에서의 규칙을 적절히 설정하여 지킨다면 그것도 좋은 규칙이 될 수 있고, 마찬가지로 다음 동작을 더 쉽게 예측할 수도 있다.

이 부분을 읽기 전에도 컨벤션을 맞춰 코드의 일관성을 유지하는 것은 중요하다고 생각했었는데, 그 목적이나 방법에 대해 구체적으로 읽어나가니 형식을 맞추는 것의 중요성을 다시 깨닫게 된 것 같다.