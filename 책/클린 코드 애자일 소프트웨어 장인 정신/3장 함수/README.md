# 3장 함수

# 1. 작게 만들자

해당 챕터에서 함수를 작게 만들자는 얘기가 꽤 강조되어 나타난다. 여기서 작게는 상대적인 개념으로 서로가 받아들이는 정도가 다를 수 있지만 작으면 작을수록 좋다는 표현을 사용한다.

함수를 작게 만든다는 것은 함수 로직의 코드 줄이 짧다는 것이고, 함수를 작게 만들면 코드를 이해하는 것도 쉬워지고 읽기도 쉬워진다. 이를 위해 중첩 구조가 생길 만큼 함수가 커져서는 안된다는 것도 덧붙인다. if문, if ~ else문, while문 등이 함수 내부에서 필요하다면 한 번의 블록만을 허용하는 것이 작게 만드는 방법이 될 수 있다.

<br />

# 2. 하나의 함수는 한 가지만 수행하자

하나의 함수가 한 가지만 수행하면 결국 상대적으로 함수가 작아질 수밖에 없고, 코드가 읽기 쉬워지는 이점이 있다. 여기서 한 가지만 수행한다는 것은 추상화의 수준이 한 가지인 것을 의미한다.

코드를 짜다 보면 함수에서 여러 가지 분기를 처리해야 할 경우가 생긴다. 만약 특정 변수가 true라면 해당 변수를 수정하여 반환하고, false라면 다른 변수를 생성하여 반환하는 등 분기가 가능한데, 이럴 경우 한 가지만 하는 것이 아니게 된다.

<br />

그리고 함수 내부의 로직을 다른 함수로 추출할 수 있다면 한 가지만 수행하는 함수가 아니게 된다. 함수 내 섹션을 나눌 수 있다면 이 또한 여러 작업을 해야 한다는 것을 의미한다.

다만, 추상화 수준이 하나인 함수를 구현하는 것은 쉽지 않지만, 한 가지만 수행한다는 것을 기억하고 규칙을 지킨다면 추상화 수준을 일관되게 유지할 수 있을 것이다.

<br />

# 3. 서술적인 이름을 사용하자

처음 프로그래밍을 공부할 때 함수 명을 작성하는 것이 어려웠고, 한 가지의 단어만 사용했었던 것이 기억난다. `set`, `solution` 등 함수 이름만 봤을 때 해당 함수가 무엇을 하는 함수인지 알 수 없는 이름만 붙여주었는데, 길게 이름을 지으면 읽기 힘들어질 것 같았고, 다른 코드와 섞였을 때 가독성이 떨어져 보였기 때문이다.

책에서는 이름이 길어도 괜찮고, 서술적인 이름도 상관없다고 표현한다. 지금 생각해 보면 길고 서술적인 이름이 짧고 의미를 알 수 없는 이름보다 훨씬 좋다고 생각한다. 위에서 얘기한 한 가지만 수행하는 함수라면 서술적인 이름은 함수의 의미를 명확하게 할 수 있고, 다른 사람이 읽었을 때 그 의미를 더 잘 파악할 수 있게 해준다고 생각한다.

예를 들어 `set`함수보다 `updatePageContent`와 같은 서술적인 이름이 읽기에 어렵지 않고 의미를 이해하는 측면에서도 유리하다.

<br />

# 4. 함수 인수

**함수 인수는 0개일 때 가장 좋고**, 그다음이 1개, 그다음이 2개가 좋다고 표현한다. 개인적으로 함수 인수에 대해 크게 고민해 본 적이 없었고, 필요하다면 바로바로 인수에 추가하여 사용했었는데, 다시 생각해 보니 확실히 좋지 못하다.

함수의 인수가 없다면 간단하다. 사용할 때 부주의로 인한 실수가 적어진다. 상황에 따라 인수가 필요한 경우도 있지만, 만약 필요하지 않다면 인수가 없는 것이 가장 좋다.

인수가 2개 이상이 되면 사용자가 인수의 흐름을 의도적으로 기억하고 있어야 한다. 직교 좌표계 `(x, y)`와 같이 자연스러운 순서가 보장된 인수라면 괜찮을 수 있지만 `(userName, message)` 와 같은 인수는 아무런 연관 관계가 없으므로 사용자가 이 흐름을 기억하고 있어야 한다.

<br />

개인적으로 인수를 2개 이상 사용할 때 인수의 순서를 바꿔 호출하는 경우가 꽤 있었다. 자바스크립트에서는 타입이 다른 인수를 넣어도 오류가 발생하지 않고, 심지어 인수의 개수가 맞지 않아도 `arguments 객체`로 인해 인수가 `undefined`로 사용되거나 변형되어 `NaN` 과 같은 데이터를 통해 에러 없이 함수가 실행된다.

타입스크립트를 사용하면 이러한 부분을 코드 작성 단계에서 미리 확인할 수 있어 어느 정도는 예방할 수 있지만, 만약 2개 이상의 인수가 모두 같은 데이터 타입이고, 그럴 리는 없겠지만 인수의 이름을 `arg1`, `arg2`라고 지었다면 마찬가지로 의도한 대로 동작하지 않을 수 있기 때문에 인수는 적을수록, 없을수록 좋다.

<br />

### ※ 동사/명사

함수의 의도나 인수의 순서를 제대로 표현하려 할 때 동사/명사 쌍을 이루면 좋다. 예를 들어 `writeFiled(name)` 함수는 **필드**에 **이름**을 **작성**한다는 행위가 이름을 통해 드러난다.

<br />

# 5. 부수 효과를 일으키지 말자

사용자의 ID와 Password를 확인하고 일치하면 true, 일치하지 않으면 false를 반환하는 `checkPassword(id, password)`함수가 있다고 가정하자. 단순하게 비교 후 true, false만 반환한다면 괜찮을 수 있지만, 만약 ID, Password가 일치할 때 세션을 초기화하는 함수를 호출하게 된다면 괜찮지 않다.

우선 함수 이름을 보고 세션을 초기화하는지 전혀 알 수 없다. 협업 중인 다른 개발자가 해당 함수의 이름만 보고 함수를 사용한다면 의도하지 않게 세션이 초기화될 가능성이 존재한다.

이를 `checkPasswordAndInitializeSession(id, password)`라고 수정한다면 좋은 이름이 될 수 있겠지만 하나의 함수에서 한 가지만 수행하자는 규칙에 어긋난다.

<br />

# 6. 반복하지 말자

중복되는 코드는 비효율적이다. 만약 5군데에서 중복되는 코드가 있다면, 코드를 수정해야 할 때 5군데나 손을 봐야 한다. 다른 코드와 섞이면 중복이 금방 드러나지도 않는다.

책에서는 중복이 모든 소프트웨어에서의 악의 근원일 수 있다고 표현한다.

중복되는 코드를 하나의 함수로 추출하여 사용할 때 중복되는 부분의 가독성도 높아지고 간결해진다. 또한 수정도 한 번만 하면 된다. 반복되는 코드를 남겨야 할 근거가 없다.

<br />

# 7. 정리

함수를 작성할 때 좋은 이름을 짓기도 어렵고, 추상화 수준이 한 가지인 함수 로직을 짜는 것도 어렵다. 책에서도 한 번에 모든 것을 고려하여 함수를 작성하는 것이 불가능하다고 표현하고 있다.

개인적으로 알고리즘 문제를 풀거나 프로젝트를 할 때 함수를 더 잘게 쪼개거나 중복되는 코드를 하나의 함수로 추출했을 때 전체적인 코드가 훨씬 간결해지고 코드의 흐름을 읽기 더 수월해지는 것을 경험한 적이 있다. 이런 장점이 있지만 그럼에도 함수를 더 작게 만드는 것은 어려워서 잘 실천하지는 못하고 있다.

그래도 이번 챕터를 읽음으로써 함수의 좋은 이름을 짓는 것과 동시에 함수를 최대한 작게 만들 수 있는지를 고민하면서 코드를 짜야겠다는 다짐을 하고 조금씩 다듬어가고 싶다는 생각이 들었다.