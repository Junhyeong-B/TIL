# 17장 리덕스를 사용하여 리액트 애플리케이션 상태 관리하기

- 자바스크립트에서 사용한 redux는 store.dispatch, store.subscribe 내장 함수들을 사용했지만, 리액트에서 react-redux를 사용한다면 유틸함수(connect)와 컴포넌트(Provider)를 사용하여 작업을 처리한다.
- `yarn add redux react-redux`

# 17.3 리덕스 관련 코드 작성하기

- 리덕스는 액션 타입, 액션 생성 함수, 리듀서 코드를 작성하는데 이 코드들은 각각 다른 파일에 작성하는 방법도 있고, 기능별로 작성할 수도 있다. ⇒ 정답은 없다.

1. 일반적인 구조
    - 리덕스 공식 문서에서는 actions, constants, reducers 세 개의 디렉토리를 만들고 그 안에 기능별로 파일을 하나씩 만드는 방식이 사용된다.
        - 단, 이 방법은 새로운 액션을 만들 때마다 세 종류의 파일을 모두 수정해야 한다.

![Untitled](17%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%20cb5b1/Untitled.png)

1. Ducks 패턴
    - 기능별로 파일 하나에 몰아서 다 작성하는 방식이다.

![Untitled](17%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%85%E1%85%B5%E1%84%83%E1%85%A5%20cb5b1/Untitled%201.png)

## 17.3.1 counter 모듈 작성하기

- 액션 타입을 정의할 때 `모듈 이름(소문자)/액션 이름(대문자)` 형태로 작성하면 액션 타입이 중복되는 것을 방지할 수 있다.

```jsx
const INCREASE = "counter/INCREASE";
const DECREASE = "counter/DECREASE";

export const increase = () => ({ type: INCREASE });
export const decrease = () => ({ type: DECREASE });

const initialState = {
  number: 0,
};

const counter = (state = initialState, action) => {
  switch (action.type) {
    case INCREASE:
      return {
        number: state.number + 1,
      };
    case DECREASE:
      return {
        number: state.number - 1,
      };
    default:
      return state;
  }
};

export default counter;
```

## 17.3.3 루트 리듀서 만들기

- 리듀서를 여러개 만들면(여기서는 counter만 만들었지만, todos reducer도 있다고 가정한다.) 기존의 createStore에는 한 개의 reducer만 사용해야 하므로 그대로 파라미터로 전달할 수는 없다.
- 대신 combineReducers 유틸 함수를 사용하여 두 개 이상의 리듀서를 전달하여 루트 리듀서를 생성할 수 있다.

```jsx
import { combineReducers } from "redux";

const rootReducer = combineReducers({
  counter,
  todos,
});

export default rootReducer;
```

# 17.4 리액트 어플리케이션에 리덕스 적용하기

- `src/index.js`

```jsx
import React from 'react';
import ReactDOM from 'react-dom';
import App from './App';
import './index.css';
import { Provider } from 'react-redux';
import rootReducer from './modules';

const store = createStore(rootReducer);

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>
  document.getElementById('root')
);
```